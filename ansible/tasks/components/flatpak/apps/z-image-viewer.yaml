- name: Install and setup Image Viewer
  vars:
    app_id: org.kde.gwenview
  block:
    - name: Install {{ app_id }} with flatpak
      community.general.flatpak:
        method: user
        state: present
        remote: flathub
        name:
          - "{{ app_id }}"
    - name: Make {{ app_id }} as default image viewer
      community.general.xdg_mime:
        mime_types:
          # vector
          - image/svg+xml # {'*.svg'}
          # lossless
          - image/bmp # {'*.dib', '*.bmp'}
          - image/png # {'*.png'}
          - image/apng # {'*.png', '*.apng'}
          - image/gif # {'*.gif'}
          # mkv container
          - image/webp # {'*.webp'}
          # mp4 container
          - image/heif # {'*.heic', '*.heif', '*.hif'}
          - image/avif # {'*.avif', '*.avifs'}
          # jpeg's
          - image/jpeg # {'*.jpg', '*.jpeg', '*.jpe', '*.jfif'}
          - image/jp2 # {'*.jp2', '*.jpg2'}
          - image/jxl # {'*.jxl'}
          - image/jxr # {'*.wdp', '*.hdp', '*.jxr'}
          # raw
          - image/x-adobe-dng # {'*.dng'}
          # scan
          - image/tiff # {'*.tif', '*.tiff'}
          # icon
          - image/vnd.microsoft.icon # {'*.ico'}
          - image/x-icns # {'*.icns'}
        handler: "{{ app_id }}.desktop"
